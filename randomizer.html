<!DOCTYPE html>
<html>

    <head>
        <title>Single file Dominion randomizer</title>
        <meta charset="utf-8">    

        <style>

.flex_list {
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;

    -webkit-flex-wrap: wrap;
    -ms-flex-wrap: wrap;
    flex-wrap: wrap;
}

.flex_item {
    width: 20%;
    float: left;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
}

figure {
    text-align: center;
    border: 1px solid black;
    display: flex;
    flex-direction: column;
}

figcaption {
    border-bottom: 1px solid black;
}

.hidden {
    display: none;
}

.card_text {
    flex: 1 0 auto;
}

.footer {
    flex: 0 0 auto;
    border-top: 1px solid black;
}

.card_cost {
    float: left;
    background: yellow;
    border-radius: 50%;
    box-shadow: inset 0 0 2px red;
    width: 1em;

}


        </style>

        <script type='text/javascript'>
<!--

const existing_cards = JSON.parse(`
[
    {
        "actions": 0, 
        "cost": 3, 
        "name": "Amulet", 
        "set": "adventures", 
        "tags": [], 
        "types": [
            "Action", 
            "Duration"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 5, 
        "name": "Artificer", 
        "set": "adventures", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Bridge Troll", 
        "set": "adventures", 
        "tags": [], 
        "types": [
            "Action", 
            "Attack", 
            "Duration"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 3, 
        "name": "Caravan Guard", 
        "set": "adventures", 
        "tags": [], 
        "types": [
            "Action", 
            "Duration", 
            "Reaction"
        ]
    }, 
    {
        "actions": 2, 
        "cost": 2, 
        "name": "Coin of the Realm", 
        "set": "adventures", 
        "tags": [], 
        "types": [
            "Treasure", 
            "Reserve"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Distant Lands", 
        "set": "adventures", 
        "tags": [], 
        "types": [
            "Action", 
            "Reserve", 
            "Victory"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 3, 
        "name": "Dungeon", 
        "set": "adventures", 
        "tags": [], 
        "types": [
            "Action", 
            "Duration"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Duplicate", 
        "set": "adventures", 
        "tags": [], 
        "types": [
            "Action", 
            "Reserve"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 3, 
        "name": "Gear", 
        "set": "adventures", 
        "tags": [], 
        "types": [
            "Action", 
            "Duration"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Giant", 
        "set": "adventures", 
        "tags": [], 
        "types": [
            "Action", 
            "Attack"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 3, 
        "name": "Guide", 
        "set": "adventures", 
        "tags": [], 
        "types": [
            "Action", 
            "Reserve"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Haunted Woods", 
        "set": "adventures", 
        "tags": [], 
        "types": [
            "Action", 
            "Duration", 
            "Attack"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 6, 
        "name": "Hireling", 
        "set": "adventures", 
        "tags": [], 
        "types": [
            "Action", 
            "Duration"
        ]
    }, 
    {
        "actions": 2, 
        "cost": 5, 
        "name": "Lost City", 
        "set": "adventures", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 4, 
        "name": "Magpie", 
        "set": "adventures", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Messenger", 
        "set": "adventures", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Miser", 
        "set": "adventures", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 2, 
        "name": "Page", 
        "set": "adventures", 
        "tags": [], 
        "types": [
            "Action", 
            "Traveller"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 2, 
        "name": "Peasant", 
        "set": "adventures", 
        "tags": [], 
        "types": [
            "Action", 
            "Traveller"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 4, 
        "name": "Port", 
        "set": "adventures", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Ranger", 
        "set": "adventures", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 2, 
        "name": "Ratcatcher", 
        "set": "adventures", 
        "tags": [], 
        "types": [
            "Action", 
            "Duration"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 2, 
        "name": "Raze", 
        "set": "adventures", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 5, 
        "name": "Relic", 
        "set": "adventures", 
        "tags": [], 
        "types": [
            "Treasure", 
            "Attack"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 5, 
        "name": "Royal Carriage", 
        "set": "adventures", 
        "tags": [], 
        "types": [
            "Action", 
            "Reserve"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 5, 
        "name": "Storyteller", 
        "set": "adventures", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Swamp Hag", 
        "set": "adventures", 
        "tags": [], 
        "types": [
            "Action", 
            "Duration", 
            "Attack"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 4, 
        "name": "Transmogrify", 
        "set": "adventures", 
        "tags": [], 
        "types": [
            "Action", 
            "Reserve"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 5, 
        "name": "Treasure Trove", 
        "set": "adventures", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Wine Merchant", 
        "set": "adventures", 
        "tags": [], 
        "types": [
            "Action", 
            "Reserve"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 3, 
        "name": "Alchemist", 
        "set": "alchemy", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 2, 
        "name": "Apothecary", 
        "set": "alchemy", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 5, 
        "name": "Apprentice", 
        "set": "alchemy", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 3, 
        "name": "Familiar", 
        "set": "alchemy", 
        "tags": [], 
        "types": [
            "Action", 
            "Attack"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Golem", 
        "set": "alchemy", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 2, 
        "name": "Herbalist", 
        "set": "alchemy", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 3, 
        "name": "Philosopher's Stone", 
        "set": "alchemy", 
        "tags": [], 
        "types": [
            "Treasure"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 6, 
        "name": "Possession", 
        "set": "alchemy", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 2, 
        "name": "Scrying Pool", 
        "set": "alchemy", 
        "tags": [], 
        "types": [
            "Action", 
            "Attack"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 0, 
        "name": "Transmute", 
        "set": "alchemy", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 2, 
        "cost": 2, 
        "name": "University", 
        "set": "alchemy", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 0, 
        "name": "Vineyard", 
        "set": "alchemy", 
        "tags": [], 
        "types": [
            "Victory"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 6, 
        "name": "Fairgrounds", 
        "set": "cornucopia", 
        "tags": [], 
        "types": [
            "Victory"
        ]
    }, 
    {
        "actions": 2, 
        "cost": 4, 
        "name": "Farming Village", 
        "set": "cornucopia", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 3, 
        "name": "Fortune Teller", 
        "set": "cornucopia", 
        "tags": [
            "deck_pooper"
        ], 
        "types": [
            "Action", 
            "Attack"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 2, 
        "name": "Hamlet", 
        "set": "cornucopia", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Harvest", 
        "set": "cornucopia", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Horn of Plenty", 
        "set": "cornucopia", 
        "tags": [], 
        "types": [
            "Treasure"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Horse Traders", 
        "set": "cornucopia", 
        "tags": [], 
        "types": [
            "Action", 
            "Reaction"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 5, 
        "name": "Hunting Party", 
        "set": "cornucopia", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Jester", 
        "set": "cornucopia", 
        "tags": [
            "gives_junk"
        ], 
        "types": [
            "Action", 
            "Attack"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 3, 
        "name": "Menagerie", 
        "set": "cornucopia", 
        "tags": [
            "counters_handsize"
        ], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Remake", 
        "set": "cornucopia", 
        "tags": [
            "counters_junk"
        ], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 4, 
        "name": "Tournament", 
        "set": "cornucopia", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Young Witch", 
        "set": "cornucopia", 
        "tags": [
            "gives_junk"
        ], 
        "types": [
            "Action", 
            "Attack"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Altar", 
        "set": "darkages", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Armory", 
        "set": "darkages", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Band of Misfits", 
        "set": "darkages", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 2, 
        "cost": 5, 
        "name": "Bandit Camp", 
        "set": "darkages", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 2, 
        "name": "Beggar", 
        "set": "darkages", 
        "tags": [], 
        "types": [
            "Action", 
            "Reaction"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Catacombs", 
        "set": "darkages", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Count", 
        "set": "darkages", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Counterfeit", 
        "set": "darkages", 
        "tags": [], 
        "types": [
            "Treasure"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 5, 
        "name": "Cultist", 
        "set": "darkages", 
        "tags": [], 
        "types": [
            "Action", 
            "Attack", 
            "Looter"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Death Cart", 
        "set": "darkages", 
        "tags": [], 
        "types": [
            "Action", 
            "Looter"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 4, 
        "name": "Feodum", 
        "set": "darkages", 
        "tags": [], 
        "types": [
            "Victory"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 3, 
        "name": "Forager", 
        "set": "darkages", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 2, 
        "cost": 4, 
        "name": "Fortress", 
        "set": "darkages", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Graverobber", 
        "set": "darkages", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 2, 
        "cost": 3, 
        "name": "Hermit", 
        "set": "darkages", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 6, 
        "name": "Hunting Grounds", 
        "set": "darkages", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 2, 
        "cost": 4, 
        "name": "Ironmonger", 
        "set": "darkages", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 5, 
        "name": "Junk Dealer", 
        "set": "darkages", 
        "tags": [], 
        "types": [
            "Action", 
            "Attack", 
            "Knight"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Knights", 
        "set": "darkages", 
        "tags": [], 
        "types": [
            "Action", 
            "Attack", 
            "Knight"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Marauder", 
        "set": "darkages", 
        "tags": [], 
        "types": [
            "Action", 
            "Attack", 
            "Looter"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 3, 
        "name": "Market Square", 
        "set": "darkages", 
        "tags": [], 
        "types": [
            "Action", 
            "Reaction"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 5, 
        "name": "Mystic", 
        "set": "darkages", 
        "tags": [], 
        "types": [
            "Action", 
            "Attack"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Pillage", 
        "set": "darkages", 
        "tags": [], 
        "types": [
            "Action", 
            "Attack"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 1, 
        "name": "Poor House", 
        "set": "darkages", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 2, 
        "cost": 4, 
        "name": "Procession", 
        "set": "darkages", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 4, 
        "name": "Rats", 
        "set": "darkages", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 5, 
        "name": "Rebuild", 
        "set": "darkages", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Rogue", 
        "set": "darkages", 
        "tags": [], 
        "types": [
            "Action", 
            "Attack"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 3, 
        "name": "Sage", 
        "set": "darkages", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Scavenger", 
        "set": "darkages", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 2, 
        "cost": 2, 
        "name": "Squire", 
        "set": "darkages", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 3, 
        "name": "Storeroom", 
        "set": "darkages", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 4, 
        "name": "Urchin", 
        "set": "darkages", 
        "tags": [], 
        "types": [
            "Action", 
            "Attack"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 2, 
        "name": "Vagrant", 
        "set": "darkages", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 2, 
        "cost": 4, 
        "name": "Wandering Minstrel", 
        "set": "darkages", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 6, 
        "name": "Adventurer", 
        "set": "dominion", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 4, 
        "name": "Bureaucrat", 
        "set": "dominion", 
        "tags": [], 
        "types": [
            "Action", 
            "Attack"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 2, 
        "name": "Cellar", 
        "set": "dominion", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 3, 
        "name": "Chancellor", 
        "set": "dominion", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 2, 
        "name": "Chapel", 
        "set": "dominion", 
        "tags": [
            "counters_junk"
        ], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Council Room", 
        "set": "dominion", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Feast", 
        "set": "dominion", 
        "tags": [
            "toilet_paper"
        ], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Festival", 
        "set": "dominion", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Gardens", 
        "set": "dominion", 
        "tags": [], 
        "types": [
            "Victory"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Laboratory", 
        "set": "dominion", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Library", 
        "set": "dominion", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 5, 
        "name": "Market", 
        "set": "dominion", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Militia", 
        "set": "dominion", 
        "tags": [], 
        "types": [
            "Action", 
            "Attack"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Mine", 
        "set": "dominion", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 2, 
        "name": "Moat", 
        "set": "dominion", 
        "tags": [], 
        "types": [
            "Action", 
            "Reaction"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Moneylender", 
        "set": "dominion", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 2, 
        "cost": 4, 
        "name": "Remodel", 
        "set": "dominion", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Smithy", 
        "set": "dominion", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 4, 
        "name": "Spy", 
        "set": "dominion", 
        "tags": [], 
        "types": [
            "Action", 
            "Attack"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Thief", 
        "set": "dominion", 
        "tags": [], 
        "types": [
            "Action", 
            "Attack"
        ]
    }, 
    {
        "actions": 2, 
        "cost": 4, 
        "name": "Throne Room", 
        "set": "dominion", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 2, 
        "cost": 3, 
        "name": "Village", 
        "set": "dominion", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Witch", 
        "set": "dominion", 
        "tags": [], 
        "types": [
            "Action", 
            "Attack"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 3, 
        "name": "Woodcutter", 
        "set": "dominion", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 3, 
        "name": "Workshop", 
        "set": "dominion", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 4, 
        "name": "Advisor", 
        "set": "guilds", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 5, 
        "name": "Baker", 
        "set": "guilds", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Butcher", 
        "set": "guilds", 
        "tags": [
            "counters_junk"
        ], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 2, 
        "name": "Candlestick Maker", 
        "set": "guilds", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 3, 
        "name": "Doctor", 
        "set": "guilds", 
        "tags": [
            "counters_junk"
        ], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 4, 
        "name": "Herald", 
        "set": "guilds", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Journeyman", 
        "set": "guilds", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 3, 
        "name": "Masterpiece", 
        "set": "guilds", 
        "tags": [], 
        "types": [
            "Treasure"
        ]
    }, 
    {
        "actions": 2, 
        "cost": 4, 
        "name": "Plaza", 
        "set": "guilds", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Soothsayer", 
        "set": "guilds", 
        "tags": [
            "gives_junk"
        ], 
        "types": [
            "Action", 
            "Attack"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 2, 
        "name": "Stonemason", 
        "set": "guilds", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Taxman", 
        "set": "guilds", 
        "tags": [
            "reduces_hand"
        ], 
        "types": [
            "Action", 
            "Attack"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Treasure Map", 
        "set": "guilds", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 2, 
        "cost": 6, 
        "name": "Border Village", 
        "set": "hinterlands", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 5, 
        "name": "Cache", 
        "set": "hinterlands", 
        "tags": [], 
        "types": [
            "Treasure"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 5, 
        "name": "Cartographer", 
        "set": "hinterlands", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 2, 
        "cost": 2, 
        "name": "Crossroads", 
        "set": "hinterlands", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 3, 
        "name": "Develop", 
        "set": "hinterlands", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 2, 
        "name": "Duchess", 
        "set": "hinterlands", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Embassy", 
        "set": "hinterlands", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 6, 
        "name": "Farmland", 
        "set": "hinterlands", 
        "tags": [], 
        "types": [
            "Victory"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 2, 
        "name": "Fool's Gold", 
        "set": "hinterlands", 
        "tags": [], 
        "types": [
            "Treasure", 
            "Reaction"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Haggler", 
        "set": "hinterlands", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 5, 
        "name": "Highway", 
        "set": "hinterlands", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 5, 
        "name": "Ill-Gotten Gains", 
        "set": "hinterlands", 
        "tags": [], 
        "types": [
            "Treasure"
        ]
    }, 
    {
        "actions": 2, 
        "cost": 5, 
        "name": "Inn", 
        "set": "hinterlands", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Jack of All Trades", 
        "set": "hinterlands", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Mandarin", 
        "set": "hinterlands", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Margrave", 
        "set": "hinterlands", 
        "tags": [], 
        "types": [
            "Action", 
            "Attack"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Noble Brigand", 
        "set": "hinterlands", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Nomad Camp", 
        "set": "hinterlands", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 3, 
        "name": "Oasis", 
        "set": "hinterlands", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 3, 
        "name": "Oracle", 
        "set": "hinterlands", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 3, 
        "name": "Scheme", 
        "set": "hinterlands", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Silk Road", 
        "set": "hinterlands", 
        "tags": [], 
        "types": [
            "Victory"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 4, 
        "name": "Spice Merchant", 
        "set": "hinterlands", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 4, 
        "name": "Stables", 
        "set": "hinterlands", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Trader", 
        "set": "hinterlands", 
        "tags": [], 
        "types": [
            "Action", 
            "Reaction"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 3, 
        "name": "Tunnel", 
        "set": "hinterlands", 
        "tags": [], 
        "types": [
            "Reaction", 
            "Victory"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Baron", 
        "set": "intrigue", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Bridge", 
        "set": "intrigue", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 4, 
        "name": "Conspirator", 
        "set": "intrigue", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Coppersmith", 
        "set": "intrigue", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 2, 
        "name": "Courtyard", 
        "set": "intrigue", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Duke", 
        "set": "intrigue", 
        "tags": [], 
        "types": [
            "Victory"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 3, 
        "name": "Great Hall", 
        "set": "intrigue", 
        "tags": [], 
        "types": [
            "Action", 
            "Victory"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 6, 
        "name": "Harem", 
        "set": "intrigue", 
        "tags": [], 
        "types": [
            "Treasure", 
            "Victory"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 4, 
        "name": "Irownorks", 
        "set": "intrigue", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 3, 
        "name": "Masquerade", 
        "set": "intrigue", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 2, 
        "cost": 4, 
        "name": "Mining Village", 
        "set": "intrigue", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 5, 
        "name": "Minion", 
        "set": "intrigue", 
        "tags": [], 
        "types": [
            "Action", 
            "Attack"
        ]
    }, 
    {
        "actions": 2, 
        "cost": 5, 
        "name": "Nobles", 
        "set": "intrigue", 
        "tags": [], 
        "types": [
            "Action", 
            "Victory"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 2, 
        "name": "Pawn", 
        "set": "intrigue", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Saboteur", 
        "set": "intrigue", 
        "tags": [], 
        "types": [
            "Action", 
            "Attack"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 4, 
        "name": "Scout", 
        "set": "intrigue", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 2, 
        "name": "Secret Chamber", 
        "set": "intrigue", 
        "tags": [], 
        "types": [
            "Action", 
            "Reaction"
        ]
    }, 
    {
        "actions": 2, 
        "cost": 3, 
        "name": "Shanty Town", 
        "set": "intrigue", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Steward", 
        "set": "intrigue", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 3, 
        "name": "Swindler", 
        "set": "intrigue", 
        "tags": [], 
        "types": [
            "Action", 
            "Attack"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Torturer", 
        "set": "intrigue", 
        "tags": [], 
        "types": [
            "Action", 
            "Attack"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Trading Post", 
        "set": "intrigue", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 2, 
        "cost": 5, 
        "name": "Tribute", 
        "set": "intrigue", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 5, 
        "name": "Upgrade", 
        "set": "intrigue", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 3, 
        "name": "Wishing Well", 
        "set": "intrigue", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 7, 
        "name": "Bank", 
        "set": "prosperity", 
        "tags": [], 
        "types": [
            "Treasure"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Bishop", 
        "set": "prosperity", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 2, 
        "cost": 5, 
        "name": "City", 
        "set": "prosperity", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 5, 
        "name": "Contraband", 
        "set": "prosperity", 
        "tags": [], 
        "types": [
            "Treasure"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 5, 
        "name": "Contraband", 
        "set": "prosperity", 
        "tags": [], 
        "types": [
            "Treasure"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Counting House", 
        "set": "prosperity", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 7, 
        "name": "Expand", 
        "set": "prosperity", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 7, 
        "name": "Forge", 
        "set": "prosperity", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 6, 
        "name": "Goons", 
        "set": "prosperity", 
        "tags": [], 
        "types": [
            "Action", 
            "Attack"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 6, 
        "name": "Grand Market", 
        "set": "prosperity", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 6, 
        "name": "Hoard", 
        "set": "prosperity", 
        "tags": [], 
        "types": [
            "Treasure"
        ]
    }, 
    {
        "actions": 2, 
        "cost": 7, 
        "name": "King's Court", 
        "set": "prosperity", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 3, 
        "name": "Loan", 
        "set": "prosperity", 
        "tags": [], 
        "types": [
            "Treasure"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Mint", 
        "set": "prosperity", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Monument", 
        "set": "prosperity", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Mountebank", 
        "set": "prosperity", 
        "tags": [], 
        "types": [
            "Action", 
            "Attack"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 8, 
        "name": "Peddler", 
        "set": "prosperity", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Quarry", 
        "set": "prosperity", 
        "tags": [], 
        "types": [
            "Treasure"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Rabble", 
        "set": "prosperity", 
        "tags": [], 
        "types": [
            "Action", 
            "Attack"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 2, 
        "name": "Royal Seal", 
        "set": "prosperity", 
        "tags": [], 
        "types": [
            "Treasure"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 4, 
        "name": "Talisman", 
        "set": "prosperity", 
        "tags": [], 
        "types": [
            "Treasure"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 3, 
        "name": "Trade Route", 
        "set": "prosperity", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 5, 
        "name": "Vault", 
        "set": "prosperity", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Venture", 
        "set": "prosperity", 
        "tags": [], 
        "types": [
            "Treasure"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 3, 
        "name": "Watchtower", 
        "set": "prosperity", 
        "tags": [], 
        "types": [
            "Action", 
            "Reaction"
        ]
    }, 
    {
        "actions": 2, 
        "cost": 4, 
        "name": "Worker's Village", 
        "set": "prosperity", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 3, 
        "name": "Ambassador", 
        "set": "seaside", 
        "tags": [
            "counters_junk", 
            "gives_junk"
        ], 
        "types": [
            "Action", 
            "Attack"
        ]
    }, 
    {
        "actions": 2, 
        "cost": 5, 
        "name": "Bazaar", 
        "set": "seaside", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 4, 
        "name": "Caravan", 
        "set": "seaside", 
        "tags": [], 
        "types": [
            "Action", 
            "Duration"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Cutpurse", 
        "set": "seaside", 
        "tags": [
            "reduces_hand"
        ], 
        "types": [
            "Action", 
            "Attack"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 2, 
        "name": "Embargo", 
        "set": "seaside", 
        "tags": [
            "gives_junk", 
            "punishes_buying"
        ], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Explorer", 
        "set": "seaside", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 2, 
        "cost": 3, 
        "name": "Fishing Village", 
        "set": "seaside", 
        "tags": [], 
        "types": [
            "Action", 
            "Duration"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Ghost Ship", 
        "set": "seaside", 
        "tags": [
            "reduces_hand", 
            "deck_pooper"
        ], 
        "types": [
            "Action", 
            "Attack"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 2, 
        "name": "Haven", 
        "set": "seaside", 
        "tags": [], 
        "types": [
            "Action", 
            "Duration"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Island", 
        "set": "seaside", 
        "tags": [
            "counters_junk"
        ], 
        "types": [
            "Action", 
            "Victory"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 2, 
        "name": "Lighthouse", 
        "set": "seaside", 
        "tags": [], 
        "types": [
            "Action", 
            "Duration"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 3, 
        "name": "Lookout", 
        "set": "seaside", 
        "tags": [
            "counters_junk"
        ], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Merchant Guild", 
        "set": "seaside", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Merchant Ship", 
        "set": "seaside", 
        "tags": [], 
        "types": [
            "Action", 
            "Duration"
        ]
    }, 
    {
        "actions": 2, 
        "cost": 2, 
        "name": "Native Village", 
        "set": "seaside", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Navigator", 
        "set": "seaside", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Outpost", 
        "set": "seaside", 
        "tags": [], 
        "types": [
            "Action", 
            "Duration"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 2, 
        "name": "Pearl Diver", 
        "set": "seaside", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Pirate Ship", 
        "set": "seaside", 
        "tags": [
            "deck_pooper"
        ], 
        "types": [
            "Action", 
            "Attack"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Salvager", 
        "set": "seaside", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 4, 
        "name": "Sea Hag", 
        "set": "seaside", 
        "tags": [
            "gives_junk", 
            "deck_pooper"
        ], 
        "types": [
            "Action", 
            "Attack"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 3, 
        "name": "Smugglers", 
        "set": "seaside", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Tactician", 
        "set": "seaside", 
        "tags": [
            "counters_handsize"
        ], 
        "types": [
            "Action", 
            "Duration"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 5, 
        "name": "Treasury", 
        "set": "seaside", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 1, 
        "cost": 3, 
        "name": "Warehouse", 
        "set": "seaside", 
        "tags": [], 
        "types": [
            "Action"
        ]
    }, 
    {
        "actions": 0, 
        "cost": 5, 
        "name": "Wharf", 
        "set": "seaside", 
        "tags": [], 
        "types": [
            "Action", 
            "Duration"
        ]
    }
]
`);


owned_cards = Array();

function getownedcards() {
    owned_cards = [];
    owned_sets = new Set();
    existing_sets = [
        'dominion',
        'intrigue',
        'seaside',
        'alchemy',
        'prosperity',
        'cornucopia',
        'hinterlands',
        'darkages',
        'guilds',
        'adventures',
        'empires',
    ];

    var i;
    for (i = 0; i < existing_sets.length; i++) {
        var checkbox = document.getElementById('set_' + existing_sets[i]).checked;
        if (checkbox == true) {
            owned_sets.add(existing_sets[i]);
        };
    }

    for (i = 0; i < existing_cards.length; i++) {
        if (owned_sets.has(existing_cards[i].set)) {
            owned_cards.push(existing_cards[i]);
        }
    }
    return owned_cards;
}


/**
 * Randomize array element order in-place.
 * Using Durstenfeld shuffle algorithm.
 */
function shuffleArray(array) {
    for (var i = array.length - 1; i > 0; i--) {
        var j = Math.floor(Math.random() * (i + 1));
        var temp = array[i];
        array[i] = array[j];
        array[j] = temp;
    }
    return array;
}


function hide_all_cards () {
    //TODO: there's probably a more idiomatic way to hide cards.
    var displayed_cards = document.getElementsByTagName('figure');
    var i;
    for (i = 0; i < displayed_cards.length; i++) {
          displayed_cards[i].className = 'hidden';
          }
}

function select_cards (owned_cards) {
if (owned_cards.length == 0) {
    hide_all_cards();
    return;
}

var max_tries = 1000;
for (attempt = 0; attempt < max_tries; attempt++) {

    chosen_cards = new Array();
    chosen_names = new Set();

    owned_cards = shuffleArray(owned_cards);

    // Select the cards:
    var i;
    for (i = 0; i < 10; i++){
        choice = owned_cards[i];
        chosen_cards.push(choice);
        chosen_names.add(choice.name);
    }

    // add Bane if Young Witch is present.
    // reject the set if no valid bane remains.
    //
    if (chosen_names.has('Young Witch')) {
        var bane = get_bane(owned_cards, chosen_names);
        if (bane === undefined) {
            continue;
        }
        chosen_cards.push(bane);
        chosen_names.add(bane.name);
    }
    // Test conditions:
    var chosen_card_types = new Set();
    var i;
    for (i = 0; i < chosen_cards.length; i++) {
         var j;
              for (j = 0; j < chosen_cards[i].types.length; j++) {
                chosen_card_types.add(chosen_cards[i].types[j]);
              }
    }

    // condition: reaction only if there's an attack
    if (chosen_card_types.has('Reaction') && !chosen_card_types.has('Attack')) {
        continue;
    }

    // condition: costs
    var desiredcosts = document.getElementById('desiredcosts').value;

    var i;
    for (i = 0; i < chosen_cards.length; i++) {
        cost = new RegExp(chosen_cards[i].cost)
        desiredcosts = desiredcosts.replace(cost, '');
    }

    if (desiredcosts.length > 0) {
        continue;
    }

    // condition: attacks

    var attacks = document.querySelector('input[name = "attacks"]:checked').id;

    var bad_set = false;
    if (attacks == 'attacks_rainbowsandunicorns') {
        var i;
        for (i = 0; i < chosen_cards.length; i++) {
              if (chosen_cards[i].types.indexOf('Attack') != -1) {
              bad_set = true;
              break;
              }
        }
        if (bad_set == true) {
          continue;
        }
    }

    break;
    }

    // Sort output, leaving bane as 11th if present

    var first_ten = chosen_cards.slice(0, 10).sort(
    function(a, b){return a.cost - b.cost});
    chosen_cards = first_ten.concat(chosen_cards.slice(10));

    // insert chosen cards into page:

    document.getElementById('card_10').className = 'hidden'; // bane
    var i;
    for (i = 0; i< chosen_cards.length; i++) {
        fig = document.getElementById('card_' + i);

        fig.className = '';
        fig.querySelector('figcaption').textContent = chosen_cards[i].name;
        fig.querySelector('.card_cost').textContent = chosen_cards[i].cost;
        fig.querySelector('.card_type').textContent = chosen_cards[i].types;

    }
}


function get_bane (owned_cards, chosen_names) {
    var i;
    for (i = 0; i < owned_cards.length; i++) {
        var card = owned_cards[i];
        if ((card.cost == 2 || card.cost == 3) && !chosen_names.has(card.name)) {
            return card;
        }
    }
}



          //-->
        </script>
    </head>


    <body onload='owned_cards=getownedcards(existing_cards)'>
        <form action=''>

            <div>
                <label for='set_dominion'><input type='checkbox' id='set_dominion' onchange='owned_cards=getownedcards(existing_cards);' />Dominion</label>

                <label for='set_intrigue'><input type='checkbox' id='set_intrigue' onchange='owned_cards=getownedcards(existing_cards);' />Intrigue</label>

                <label for='set_seaside'><input type='checkbox' id='set_seaside' onchange='owned_cards=getownedcards(existing_cards);' />Seaside</label>

                <label for='set_alchemy'><input type='checkbox' id='set_alchemy' onchange='owned_cards=getownedcards(existing_cards);' />Alchemy</label>

                <label for='set_prosperity'><input type='checkbox' id='set_prosperity' onchange='owned_cards=getownedcards(existing_cards);' />Prosperity</label>

                <label for='set_cornucopia'><input type='checkbox' id='set_cornucopia' onchange='owned_cards=getownedcards(existing_cards);' />Cornucopia</label>

                <label for='set_hinterlands'><input type='checkbox' id='set_hinterlands' onchange='owned_cards=getownedcards(existing_cards);' />Hinterlands</label>

                <label for='set_darkages'><input type='checkbox' id='set_darkages' onchange='owned_cards=getownedcards(existing_cards);' />Dark Ages</label>

                <label for='set_guilds'><input type='checkbox' id='set_guilds' onchange='owned_cards=getownedcards(existing_cards);' />Guilds</label>

                <label for='set_adventures'><input type='checkbox' id='set_adventures' onchange='owned_cards=getownedcards(existing_cards);' />Adventures</label>

                <label for='set_empires'><input type='checkbox' id='set_empires' onchange='owned_cards=getownedcards(existing_cards);' />Empires</label>
            </div>

            <div>
                <label for='desiredcosts'>Card costs:</label>
                <input type='tel' maxlength='10' id='desiredcosts' value='2445' />
            </div>

            <div>
                <label for='reactions'>No Reactions without attack ?</label>
                <input type='checkbox' id='reactions' checked />
            </div>

            <div>
                <fieldset>
                    <legend>What about attacks ?</legend>
                    <label for='attacks_unrestricted'><input type='radio' id='attacks_unrestricted' name='attacks' checked />Unrestricted</label>
                    <label for='attacks_noevilgoesunpunished'><input type='radio' id='attacks_noevilgoesunpunished' name='attacks' />No evil goes unpunished</label>
                    <label for='attacks_rainbowsandunicorns'><input type='radio' id='attacks_rainbowsandunicorns' name='attacks' />Rainbows and unicorns</label>
                </fieldset>
            </div>

            <div class='button'>
                <button type='button' onclick='select_cards(owned_cards)'>Randomize</button>
            </div>
        </form>

        <ol class='flex_list'>
            <li class='flex_item'>
                <figure class='hidden' id='card_0'><figcaption></figcaption>
                    <p class='card_text'></p>
                    <div class='footer'><div class='card_cost'></div><div class='card_type'></div></div></figure>
            </li>

            <li class='flex_item'>
                <figure class='hidden' id='card_1'><figcaption></figcaption>
                    <p class='card_text'></p>
                    <div class='footer'><div class='card_cost'></div><div class='card_type'></div></div></figure>
            </li>

            <li class='flex_item'>
                <figure class='hidden' id='card_2'><figcaption></figcaption>
                    <p class='card_text'></p>
                    <div class='footer'><div class='card_cost'></div><div class='card_type'></div></div></figure>
            </li>

            <li class='flex_item'>
                <figure class='hidden' id='card_3'><figcaption></figcaption>
                    <p class='card_text'></p>
                    <div class='footer'><div class='card_cost'></div><div class='card_type'></div></div></figure>
            </li>

            <li class='flex_item'>
                <figure class='hidden' id='card_4'><figcaption></figcaption>
                    <p class='card_text'></p>
                    <div class='footer'><div class='card_cost'></div><div class='card_type'></div></div></figure>
            </li>

            <li class='flex_item'>
                <figure class='hidden' id='card_5'><figcaption></figcaption>
                    <p class='card_text'></p>
                    <div class='footer'><div class='card_cost'></div><div class='card_type'></div></div></figure>
            </li>

            <li class='flex_item'>
                <figure class='hidden' id='card_6'><figcaption></figcaption>
                    <p class='card_text'></p>
                    <div class='footer'><div class='card_cost'></div><div class='card_type'></div></div></figure>
            </li>


            <li class='flex_item'>
                <figure class='hidden' id='card_7'><figcaption></figcaption>
                    <p class='card_text'></p>
                    <div class='footer'><div class='card_cost'></div><div class='card_type'></div></div></figure>
            </li>

            <li class='flex_item'>
                <figure class='hidden' id='card_8'><figcaption></figcaption>
                    <p class='card_text'></p>
                    <div class='footer'><div class='card_cost'></div><div class='card_type'></div></div></figure>
            </li>

            <li class='flex_item'>
                <figure class='hidden' id='card_9'><figcaption></figcaption>
                    <p class='card_text'></p>
                    <div class='footer'><div class='card_cost'></div><div class='card_type'></div></div></figure>
            </li>

        </ol>
                <figure class='hidden' id='card_10'><figcaption></figcaption>
                    <p class='card_text'></p>
                    <div class='footer'><div class='card_cost'></div><div class='card_type'></div></div></figure>

    </body>

</html>
